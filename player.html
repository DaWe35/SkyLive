<style>
    body {
        margin: 0;
    }
    video {
        width: 100%;
        display: inline-block;
    }

    #player2 {
        display: none;
    }
</style>

<video id="player1" src="noisecopy/0.mp4" controls preload></video><!--

--><video id="player2" src="noisecopy/1.mp4" controls preload></video>

<p id="asd">asd</p>

<script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.4.1/jquery.min.js" integrity="sha256-CSXorXvZcTkaix6Yvo6HppcZGetbYMGWSFlBw8HfCJo=" crossorigin="anonymous"></script>

<script>
    let switchWindow = 0.1

    let vid1 = document.getElementById("player1")
    let vid2 = document.getElementById("player2")
    nextvideo = 1
    currentPlayer = 1
    
/*     $('#player1').on('ended',function(){
        switchPlayer()
    });

    $('#player2').on('ended',function(){
        switchPlayer()
    }); */

    function switchPlayer() {
        if (currentPlayer == 1) {
            vid2.play()
            setTimeout(function(){
                vid1.src = 'noisecopy/' + nextvideo + '.mp4'
            }, 1000);
            setTimeout(function(){
                vid2.style.display = 'inline-block'
                vid1.style.display = 'none'
            }, switchWindow-10);
            currentPlayer = 2
        } else {
            vid1.play()
            setTimeout(function(){
                vid2.src = 'noisecopy/' + nextvideo + '.mp4'
            }, 1000);
            setTimeout(function(){
                vid1.style.display = 'inline-block'
                vid2.style.display = 'none'
            }, switchWindow-10);
            currentPlayer = 1
        }

        nextvideo += 1
    }


    const interval = setInterval(function() {
        if (currentPlayer == 1) {
            player = vid1
        } else {
            player = vid2
        }
        
        remain = player.duration - player.currentTime
        remRound = Math.round(remain * 1000) / 1000
        $('#asd').html(remRound)
        if (remain <= switchWindow) {
            switchPlayer()
        }
    }, 10);

    // clearInterval(interval);


    /* $('#player1').bind('timeupdate', function() {
        var video = $(this).get(0);
        var iNow = video.currentTime;
        var countdown = video.duration - iNow;
        if (countdown <= 0.5) {
            switchTo2()
        }
    });

    $('#player2').bind('timeupdate', function() {
        var video = $(this).get(0);
        var iNow = video.currentTime;
        var countdown = video.duration - iNow;
        if (countdown <= 0.2) {
            switchTo1()
        }
    }); */


    function pad(d) {
        return (d < 10) ? '0' + d.toString() : d.toString();
    }

</script>